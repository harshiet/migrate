<?xml version="1.0" encoding="UTF-8"?>

<flow xmlns="http://www.springframework.org/schema/webflow"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/webflow
		http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

	<view-state id="home" view="home" model="migrationRequest">
		<transition on="submit" to="connect" />
	</view-state>
	<action-state id="connect">
		<evaluate expression="connectAction.connect(migrationRequest, messageContext)" />
		<transition on="success" to="fetchSourceFields" />
		<transition on="no" to="home" />
	</action-state>
	<action-state id="fetchSourceFields">
		<evaluate expression="connectAction.connect(migrationRequest, messageContext)" />
		<transition on="success" to="fetchTargetFields" />
		<transition on="no" to="home" />
	</action-state>
	<end-state id="fetchTargetFields" view="externalRedirect:contextRelative:/homes.do" />
</flow>
